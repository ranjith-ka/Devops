# Flux 

Tutorials:    <https://fluxcd.io/flux/concepts/>

Reconciliation,Kustomization, Bootstrap


Install Binary:

`brew install fluxcd/tap/flux`

### Install/Bootstrap Flux

```bash
flux bootstrap github \
  --owner=$GITHUB_USER \
  --repository=Devops \
  --branch=feature/flux-tutorial \
  --path=./minikube/flux \
  --personal
```

### Manage the Flux installation for staging and production
```bash
./clusters/
├── staging # <- path=clusters/staging
│   └── flux-system # <- namespace dir generated by bootstrap
│       ├── gotk-components.yaml
│       ├── gotk-sync.yaml
│       └── kustomization.yaml
└── production # <- path=clusters/production
    └── flux-system
```


```
## Add the source to sync from git, then we can use this source while creating helm release.
flux create source git dev \
  --url=https://github.com/ranjith-ka/Devops \
  --branch="main" \
  --interval=1m \
  --export > source.yaml
```

```
  # Create a HelmRelease with a chart from a GitRepository source
  flux create hr app \
    --release-name=canary-dev \
    --interval=10m \
    --source="GitRepository/dev" \
    --chart=./charts/dev \
    --values=./minikube/dev/staging.yaml \
    --export > application.yaml
```